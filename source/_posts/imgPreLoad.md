---
title: 图片懒加载和预加载原理
categories: "前端技术"
date: 2017-06-17 10:44:40
---
什么是图片懒加载？图片懒加载就是，一个Html文档加载后，其中的图片不即时加载，而是根据自己设定的条件加载，如滑动到可视区域加载图片，或点击后才加载图片；    
图片预加载的原理更明白，即在html中的img标签加载之前，先将图片资源下载到本地。

<!--more-->
预加载方法很简单，在网页加载之前，先获得网页中的所有图片资源地址，并加载。下载图片的资源代码如下。
   
```
	//图片预加载
    function preLoadImg(url) {
        var img = new Image();
        img.src = url;
    }
```
关键是懒加载，如何在图片加载到页面之前，先获取到图片地址，再加载。这里巧妙的利用了data-*自定义属性，在图片的src中写空，或填写一个默认图片，真实的图片地址写入data-*自定义属性中，先获取到data-*的内容，达到加载条件后，再加载或直接填入到src中，即可显示在页面。        
图片懒加载可以使用[jquery.lazyload](http://plugins.jquery.com/lazyload/ "jquery.lazyload官网")插件，很成熟的插件，有很多效果可以使用。

